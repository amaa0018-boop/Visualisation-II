{
    "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
    "background": "transparent",
    "params": [
        {
            "name": "searchLGA",
            "value": "",
            "bind": {
                "input": "text",
                "name": " "
            }
        }
    ],
    "hconcat": [
        {
            "title": "Male",
            "width": 150,
            "height": 150,
            "data": {"url": "data/2021_WPP_VIC_LGA_OB.csv"},
            "mark": {"type": "arc", "innerRadius": 40, "strokeWidth": 2, "stroke": "white"},
            "transform": [
                {
                    "filter": "datum.Sex === 'M'"
                },
                {
                    "filter": "searchLGA != '' ? lower(slice(datum.LGAName, 0, length(searchLGA))) === lower(searchLGA) : true"
                }
            ],
            "encoding": {
                "theta": {"field": "NumPeople", "type": "quantitative", "aggregate": "sum"},
                "color": {
                    "field": "Occupation", 
                    "type": "nominal"
                },
                "tooltip": [
                    {"field": "Occupation"},
                    {"field": "NumPeople", "type": "quantitative", "aggregate": "sum", "format": ",", "title": "Number of People"}
                ]
            }
        },
        {
            "title": "Female",
            "width": 150,
            "height": 150,
            "data": {"url": "data/2021_WPP_VIC_LGA_OB.csv"},
            "mark": {"type": "arc", "innerRadius": 40, "strokeWidth": 2, "stroke": "white"},
            "transform": [
                {
                    "filter": "datum.Sex === 'F'"
                },
                {
                    "filter": "searchLGA != '' ? lower(slice(datum.LGAName, 0, length(searchLGA))) === lower(searchLGA) : true"
                }
            ],
            "encoding": {
                "theta": {"field": "NumPeople", "type": "quantitative", "aggregate": "sum"},
                "color": {
                    "field": "Occupation", 
                    "type": "nominal"
                },
                "tooltip": [
                    {"field": "Occupation"},
                    {"field": "NumPeople", "type": "quantitative", "aggregate": "sum", "format": ",", "title": "Number of People"}
                ]
            }
        }
    ]
}